<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<p id="scr"></p>
<table>
    <tr>
        <th>Ho va ten</th>
        <th>CMND</th>
        <th>Ngay sinh</th>
        <th>Email</th>
        <th>Dia chi</th>
        <th>Loai Khach Hang</th>
        <th>Loai phong</th>
        <th>Loai dich vu</th>
        <th>So ngay thue</th>
        <th>So luong di kem</th>
        <th>Giam gia</th>
    </tr>

</table>
<script>
    let check;

    class Customer {
        constructor(name, cmnd, birthday, email, address, typeCustomer, typeRoom, typeService, rentDays, quantityIncluded, discount) {
            this.name = name;
            this.cmnd = cmnd;
            this.birthday = birthday;
            this.email = email;
            this.address = address;
            this.typeCustomer = typeCustomer;
            this.typeRoom = typeRoom;
            this.typeService = typeService;
            this.rentDays = rentDays;
            this.quantityIncluded = quantityIncluded;
            this.discount = discount;
        }

        getName() {
            return this.name;
        }

        getCMND() {
            return this.cmnd;
        }

        getBirthday() {
            return this.birthday;
        }

        getEmail() {
            return this.email;
        }

        getAddress() {
            return this.address;
        }

        getTypeCustomer() {
            return this.typeCustomer;
        }

        getDiscount() {
            return this.discount;
        }

        getTypeRoom() {
            return this.typeRoom;
        }

        getTypeService() {
            return this.typeService;
        }

        getRentDays() {
            return this.rentDays;
        }

        getQuantityIncluded() {
            return this.quantityIncluded;
        }

        setName(name) {
            this.name = name;
        }

        setCMND(cmnd) {
            this.cmnd = cmnd;
        }

        setBirthday(birthday) {
            this.birthday = birthday;
        }

        setEmail(email) {
            this.email = email;
        }

        setAddress(address) {
            this.address = address;
        }

        setTypeCustomer(type) {
            this.typeCustomer = type;
        }

        setDiscount(discount) {
            this.discount = discount;
        }

        setTypeRoom(type) {
            this.typeRoom = type;
        }

        setTypeService(type) {
            this.typeService = type;
        }

        setRentDays(rentDays) {
            this.rentDays = rentDays;
        }

        setQuantityIncluded(quantity) {
            this.quantityIncluded = quantity;
        }

        totalPay() {
            let totalPay;
            switch (this.typeService) {
                case "villa":
                    totalPay = 500 * rentDays * (1 - this.discount / parseFloat(100));
                    break;
                case "house":
                    totalPay = 300 * rentDays * (1 - this.discount / parseFloat(100));
                    break;
                case  "room":
                    totalPay = 100 * rentDays * (1 - this.discount / parseFloat(100));
                    break;
            }
            return totalPay;
        }
        getInfo(){
            document.write("Ho va ten: "+this.name+
                "\nCMND: "+this.cmnd+
                "\nNgay sinh: "+this.birthday+
                "\nEmail: "+this.email+
                "\nDia chi: "+this.address+
                "\nLoai khach hang: "+this.typeCustomer+
                "\nLoai phong: "+this.typeRoom+
                "\nLoai dich vu: "+this.typeService+
                "\nSo ngay thue: "+this.rentDays+
                "\nSo luong di kem: "+this.quantityIncluded+
                "\nGiam gia: "+this.discount+"\n");
        }
    }

    function addNewCustomer(arr) {
        let name = prompt("Nhap ten");
        let name2 = "";
        name = name.trim();
        name = name.toLowerCase();
        for (let i = 0; i < name.length; i++) {
            if ((name.charAt(i) == " ") && (name.charAt(i + 1) == " ")) {
                continue;
            } else if ((i == 0) || (name.charAt(i - 1) == " ")) {
                name2 += name.charAt(i).toUpperCase();
            } else {
                name2 += name.charAt(i);
            }
        }
        name = name2;
        let cmnd;
        do {
            cmnd = prompt("So CMND");
            check = true;
            if ((cmnd == "") || (isNaN(cmnd)) || (parseInt(cmnd) < 0) || (cmnd.length != 9)) {
                continue;
            }
            check = !Number.isInteger(cmnd * 1);
        } while (check);
        let birthday;
        do {
            birthday = prompt("Nhap ngay sinh");
        } while (!checkBirthday(birthday));

        let email;
        do {
            email = prompt("Nhap Email")
        } while (!checkEmail(email));
        let address = prompt("Nhap dia chi");
        let typeCustomer = prompt("Nhap loai khach hang");
        let discount = prompt("Nhap giam gia");
        let typeRoom = prompt("Nhap loai phong");
        let typeService = prompt("Nhap loai dich vu");
        let rentDays = prompt("Nhap so ngay thue");
        let quantityIncluded = prompt("Nhap so luong di kem");
        let newCustomer = new Customer(name, cmnd, birthday, email, address, typeCustomer, typeRoom, typeService, rentDays, quantityIncluded, discount);
        arr.push(newCustomer);
    }

    function checkEmail(email) {
        const re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }

    function checkBirthday(birthday) {
        const reg = /^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([1][26]|[2468][048]|[3579][26])00))))$/g;
        return reg.test(birthday);
    }

    function deleteCustomer(arr) {
        let check1 = true;
        let name = prompt("Nhap ten nguoi can xoa");
        for (let i = 0; i < arr.length; i++) {
            if (name === arr[i].getName()) {
                arr.splice(i, 1);
                check1 = false;
            }
        }
        if (check1) {
            alert("Ten ban chon khong co trong danh sach");
        }
        displayCustomer(arr);
    }
    function editCustomer(arr) {
        let name = prompt("Nhap ten nguoi can thay doi thong tin");
        let name2 = "";
        name = name.trim();
        name = name.toLowerCase();
        for (let i = 0; i < name.length; i++) {
            if ((name.charAt(i) == " ") && (name.charAt(i + 1) == " ")) {
                continue;
            } else if ((i == 0) || (name.charAt(i - 1) == " ")) {
                name2 += name.charAt(i).toUpperCase();
            } else {
                name2 += name.charAt(i);
            }
        }
        name = name2;
        let index;
        check = false;
        for (let i = 0; i < arr.length; i++) {
            if (name == arr[i].getName()) {
                index = i;
                check = false;
                break;
            }
            if (check) {
                alert("Ten ban nhap khong co trong danh sach")
            }
        }
        if (!check) {
            let choose = prompt("Chon thong tin can sua" + "\n" +
                "1.Ho va Ten: " + name + "\n" +
                "2.CMND: " + cmnd + "\n" +
                "3.Ngay sinh: " + birthday + "\n" +
                "4.Email: " + email + "\n" +
                "5.Dia chi: " + address + "\n" +
                "6.Loai Khach hang: " + typeCustomer + "\n" +
                "7.Loai phong: " + typeRoom + "\n" +
                "8.Loai dich vu: " + typeService + "\n" +
                "9.So luong di kem: " + quantityIncluded + "\n" +
                "10.So ngay thue: " + rentDays + "\n" +
                "11. Giam gia: " + discount);
            switch (parseInt(choose)) {
                case 1:
                    let name = prompt("Nhap ten");
                    let name2 = "";
                    name = name.trim();
                    name = name.toLowerCase();
                    for (let i = 0; i < name.length; i++) {
                        if ((name.charAt(i) == " ") && (name.charAt(i + 1) == " ")) {
                            continue;
                        } else if ((i == 0) || (name.charAt(i - 1) == " ")) {
                            name2 += name.charAt(i).toUpperCase();
                        } else {
                            name2 += name.charAt(i);
                        }
                    }
                    name = name2;
                    arr[index].setName(name);
                    break;
                case 2:
                    let cmnd;
                    do {
                        cmnd = prompt("So CMND");
                        check = true;
                        if ((cmnd == "") || (isNaN(cmnd)) || (parseInt(cmnd) < 0) || (cmnd.length != 9)) {
                            continue;
                        }
                        check = !Number.isInteger(cmnd * 1);
                    } while (check);
                    arr[index].setCMND(cmnd);
                    break;
                case 3:
                    let birthday;
                    do {
                        birthday = prompt("Nhap ngay sinh");
                    } while (!checkBirthday(birthday));
                    arr[index].setBirthday(birthday);
                    break;
                case 4:
                    let email;
                    do {
                        email = prompt("Nhap Email")
                    } while (!checkEmail(email));
                    arr[index].setEmail(email);
                    break;
                case 5:
                    let address = prompt("Nhap dia chi");
                    arr[index].setAddress(address);
                    break;
                case 6:
                    let typeCustomer = prompt("Nhap loai khach hang");
                    arr[index].setTypeCustomer(typeCustomer);
                    break;
                case 7:
                    let typeRoom = prompt("Nhap loai phong");
                    arr[index].setTypeRoom(typeRoom);
                    break;
                case 8:
                    let typeService = prompt("Nhap loai dich vu");
                    arr[index].setTypeService(typeService);
                    break;
                case 9:
                    let rentDays = prompt("Nhap so ngay thue");
                    arr[index].setRentDays(rentDays);
                    break;
                case 10:
                    let quantityIncluded = prompt("Nhap so luong di kem");
                    arr[index].setQuantityIncluded(quantityIncluded);
                    break;
                case 11:
                    let discount = prompt("Nhap giam gia");
                    arr[index].setDiscount(discount);
                    break;
                default:
                    alert("Lua chon cua ban khong nam trong trinh don");
            }
        }

    }
    function displayCustomer(arr){
        let bang="<table>\n" +
            "    <tr>\n" +
            "        <th>Ho va ten</th>\n" +
            "        <th>CMND</th>\n" +
            "        <th>Ngay sinh</th>\n" +
            "        <th>Email</th>\n" +
            "        <th>Dia chi</th>\n" +
            "        <th>Loai Khach Hang</th>\n" +
            "        <th>Loai phong</th>\n" +
            "        <th>Loai dich vu</th>\n" +
            "        <th>So ngay thue</th>\n" +
            "        <th>So luong di kem</th>\n" +
            "        <th>Giam gia</th>\n" +
            "    </tr>"
        for (let i=0;i<arr.length;i++){
            bang+="<tr>\n" +
                "        <td>"+arr[]+"</td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "        <td></td>\n" +
                "    </tr>";
        }
    }
    let listCustomer=[];
    let customer1=new Customer("nguyen van a","012345678","12/12/2000","dsds@sdas.com","Da nang","gold","vip","villa",6,5,20);
    listCustomer.push(customer1);
</script>
</body>
</html>